/**
 * DevExtreme (esm/__internal/scheduler/header/m_view_switcher.integration.test.js)
 * Version: 25.1.6
 * Build date: Mon Oct 13 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/
 */
import _extends from "@babel/runtime/helpers/esm/extends";
import {
    afterEach,
    describe,
    expect,
    it
} from "@jest/globals";
import $ from "../../../core/renderer";
import {
    loadMessages,
    locale
} from "../../../localization";
import Scheduler from "../../../ui/scheduler";
const SCHEDULER_CONTAINER_ID = "schedulerContainer";
const SELECTORS = {
    schedulerContainer: "#schedulerContainer",
    invisibleState: ".dx-state-invisible",
    viewSwitcher: ".dx-scheduler-view-switcher",
    viewSwitcherButton: ".dx-scheduler-view-switcher .dx-button"
};
const createScheduler = options => new Promise((resolve => {
    const $container = $("<div>").attr("id", "schedulerContainer").appendTo(document.body);
    const instance = new Scheduler($container.get(0), _extends({}, options, {
        onContentReady: () => {
            resolve({
                $container: $container,
                instance: instance
            })
        }
    }))
}));
describe("ViewSwitcher", (() => {
    afterEach((() => {
        const $container = $(SELECTORS.schedulerContainer);
        const scheduler = $container.dxScheduler("instance");
        scheduler.dispose();
        $container.remove()
    }));
    describe("Localization", (() => {
        it("should display Russian view names when locale is set to Russian", (async () => {
            loadMessages({
                ru: {
                    "dxScheduler-switcherDay": "\u0414\u0435\u043d\u044c",
                    "dxScheduler-switcherWeek": "\u041d\u0435\u0434\u0435\u043b\u044f",
                    "dxScheduler-switcherMonth": "\u041c\u0435\u0441\u044f\u0446"
                }
            });
            locale("ru");
            const {
                $container: $container
            } = await createScheduler({
                useDropDownViewSwitcher: false,
                currentView: "day",
                views: ["day", "week", "month"]
            });
            const buttons = $container.find(SELECTORS.viewSwitcherButton);
            const buttonTexts = [];
            buttons.each(((_, button) => {
                buttonTexts.push($(button).text());
                return true
            }));
            expect(buttonTexts).toContain("\u0414\u0435\u043d\u044c");
            expect(buttonTexts).toContain("\u041d\u0435\u0434\u0435\u043b\u044f");
            expect(buttonTexts).toContain("\u041c\u0435\u0441\u044f\u0446")
        }));
        it("should display Russian view names in dropdown switcher when locale is set to Russian", (async () => {
            loadMessages({
                ru: {
                    "dxScheduler-switcherDay": "\u0414\u0435\u043d\u044c",
                    "dxScheduler-switcherWeek": "\u041d\u0435\u0434\u0435\u043b\u044f",
                    "dxScheduler-switcherMonth": "\u041c\u0435\u0441\u044f\u0446"
                }
            });
            locale("ru");
            const {
                $container: $container
            } = await createScheduler({
                useDropDownViewSwitcher: true,
                currentView: "day",
                views: ["day", "week", "month"]
            });
            const viewSwitcher = $container.find(SELECTORS.viewSwitcher);
            const dropdown = viewSwitcher.find(".dx-dropdownbutton");
            const buttonText = dropdown.find(".dx-button-text");
            expect(buttonText.text()).toBe("\u0414\u0435\u043d\u044c")
        }))
    }))
}));
